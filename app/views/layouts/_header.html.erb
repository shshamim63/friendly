<nav class="navbar is-info is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <%= link_to image_tag("https://bulma.io/images/bulma-logo.png", class: "img-responsive navbar-item", id: "logo"), root_path %>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <% if user_signed_in? %>
    <div class="navbar-end">
      <div class="navbar-item">
        <div id="navbarBasicExample" class="navbar-menu">
          <div class="navbar-start">
            <strong><%= link_to "#{current_user.username}", user_path(id: current_user.id), class: "navbar-item" %></strong>

            <div class="navbar-item has-dropdown is-hoverable">
              <div class="dropdown-trigger">
                <button class="button is-info" aria-haspopup="true" aria-controls="dropdown-menu3">
                  <span class="icon">
                    <% pending_list = current_user.pending(current_user) %>
                    <i class="fas fa-bell is-darker"><%= pending_list.count %></i>
                  </span>
                </button>
              </div>
              <ol class="navbar-dropdown is-right">
                <% pending_list.each do |user|%>
                  <li href="#" class="navbar-item">
                    <%= user.full_name%><br>
                    <%= link_to 'Accept', accept_user_friendships_path(user_id: user.id), method: :post %><br>
                    <%= link_to 'Reject', reject_user_friendships_path(user_id: user.id), method: :post %><br><br>
                  </li>
                <% end %>
              </ol>
            </div>

            <strong><%= link_to "Connect", users_path, class: "navbar-item" %></strong>

            <div  class="navbar-item has-dropdown is-hoverable">
              <div class="dropdown-trigger">
                <button class="button is-info" aria-haspopup="true" aria-controls="dropdown-menu3">
                  <span class="icon">
                    <i class="fas fa-sort-down is-darker"></i>
                  </span>
                </button>
              </div>
              <div class="navbar-dropdown is-right">
                <%= link_to "Edit", edit_user_registration_path(current_user), class: "navbar-item" %>
                <%= link_to "Logout", destroy_user_session_path, method: :delete, class: "navbar-item" %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="navbar-end">
      <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
        <div class="field">
          <%= f.label :email %>
          <%= f.email_field :email, autofocus: true, autocomplete: "email" %>
          <%= f.label :password %>
          <%= f.password_field :password, autocomplete: "current-password" %>

          <% if devise_mapping.rememberable? %>
            <%= f.check_box :remember_me %>
            <%= f.label :remember_me %>
          <% end %>
          <%= f.submit "Log in", class: 'button is-link' %>
        </div>
      <% end %>
    </div>
    <div class="left-margin">
      <%= link_to '<i class="fab fa-facebook-square"></i>'.html_safe, edit_user_registration_path(current_user), class: "button  is-link is-outlined" %>
      <%= link_to '<i class="fab fa-google-plus-square"></i>'.html_safe, edit_user_registration_path(current_user), class: "button  is-link is-outlined" %>
    </div>
  <% end %>
</nav>
